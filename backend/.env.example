# 邮件附件上传功能系统环境变量配置示例
# 复制此文件为 .env 并填入实际配置值

# =============================================================================
# 基础配置
# =============================================================================
PROJECT_NAME="KB Upload Genie"
VERSION="1.0.0"
DEBUG=false
SECRET_KEY="your-super-secret-key-change-this-in-production"

# 服务器配置
HOST="0.0.0.0"
PORT=8000
ALLOWED_HOSTS="localhost,127.0.0.1,0.0.0.0,http://localhost:3000"

# =============================================================================
# 数据库配置
# =============================================================================
# PostgreSQL (推荐生产环境)
DATABASE_URL="postgresql+asyncpg://username:password@localhost:5432/kb_upload_genie"

# SQLite (开发环境)
# DATABASE_URL="sqlite+aiosqlite:///./kb_upload_genie.db"

DATABASE_ECHO=false

# =============================================================================
# Redis配置 (用于频率限制和缓存)
# =============================================================================
REDIS_ENABLED=true
REDIS_URL="redis://localhost:6379/0"
REDIS_HOST="localhost"
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=""

# =============================================================================
# 邮件上传功能配置
# =============================================================================
# 功能开关
EMAIL_UPLOAD_ENABLED=true

# 邮件检查配置
EMAIL_CHECK_INTERVAL=60
EMAIL_MARK_AS_READ=true

# =============================================================================
# SMTP配置 (用于发送通知邮件)
# =============================================================================
SMTP_HOST="smtp.gmail.com"
SMTP_PORT=587
SMTP_USER="your-email@gmail.com"
SMTP_PASSWORD="your-app-password"
SMTP_TLS=true

# =============================================================================
# IMAP配置 (用于接收邮件)
# =============================================================================
IMAP_HOST="imap.gmail.com"
IMAP_PORT=993
IMAP_USER="noreply@ciallo.cv"
IMAP_PASSWORD="your-app-password"
IMAP_USE_SSL=true
IMAP_MAILBOX="INBOX"

# =============================================================================
# 附件限制配置
# =============================================================================
# 单个附件最大大小 (字节)
EMAIL_MAX_ATTACHMENT_SIZE=10485760  # 10MB

# 每封邮件最大附件数量
EMAIL_MAX_ATTACHMENT_COUNT=5

# 允许的文件扩展名 (逗号分隔)
EMAIL_ALLOWED_EXTENSIONS=".pdf,.doc,.docx,.txt,.md,.zip,.rar,.jpg,.png,.gif"

# =============================================================================
# 频率限制配置
# =============================================================================
# 每小时邮件发送限制
EMAIL_HOURLY_LIMIT=5

# 每天邮件发送限制
EMAIL_DAILY_LIMIT=20

# =============================================================================
# 域名限制配置
# =============================================================================
# 是否启用域名白名单模式
EMAIL_DOMAIN_WHITELIST_ENABLED=false

# 允许的邮件域名 (逗号分隔)
EMAIL_ALLOWED_DOMAINS="gmail.com,outlook.com,hotmail.com,qq.com,163.com,126.com"

# =============================================================================
# 文件上传配置
# =============================================================================
UPLOAD_DIR="uploads"
MAX_FILE_SIZE=52428800  # 50MB

# =============================================================================
# 认证配置
# =============================================================================
# 管理员API Token - 用于后台管理接口认证
API_TOKEN="your-admin-token-change-this-in-production"

# =============================================================================
# JWT配置
# =============================================================================
JWT_SECRET_KEY=""  # 如果为空，将使用SECRET_KEY
JWT_ALGORITHM="HS256"
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# =============================================================================
# AI服务配置 (可选)
# =============================================================================
OPENAI_API_KEY=""
OPENAI_BASE_URL=""

GLM_API_KEY=""
GLM_BASE_URL="https://open.bigmodel.cn/api/paas/v4/"

GEMINI_API_KEY=""

MOONSHOT_API_KEY=""
MOONSHOT_BASE_URL="https://api.moonshot.cn/v1"

STEPFUN_API_KEY=""
STEPFUN_BASE_URL="https://api.stepfun.com/v1"

# =============================================================================
# GitHub配置 (可选)
# =============================================================================
GITHUB_CLIENT_ID=""
GITHUB_CLIENT_SECRET=""
GITHUB_WEBHOOK_SECRET=""

# =============================================================================
# Cloudflare Turnstile配置 (可选)
# =============================================================================
TURNSTILE_SECRET_KEY=""
TURNSTILE_SITE_KEY=""
TURNSTILE_ENABLED=false
TURNSTILE_ALLOW_SKIP_IN_DEV=true

# =============================================================================
# 日志配置
# =============================================================================
LOG_LEVEL="INFO"
LOG_FILE=""

# =============================================================================
# 邮件服务商配置示例
# =============================================================================

# Gmail配置示例:
# SMTP_HOST="smtp.gmail.com"
# SMTP_PORT=587
# IMAP_HOST="imap.gmail.com"
# IMAP_PORT=993
# 注意：需要启用两步验证并生成应用专用密码

# Outlook配置示例:
# SMTP_HOST="smtp-mail.outlook.com"
# SMTP_PORT=587
# IMAP_HOST="outlook.office365.com"
# IMAP_PORT=993

# QQ邮箱配置示例:
# SMTP_HOST="smtp.qq.com"
# SMTP_PORT=587
# IMAP_HOST="imap.qq.com"
# IMAP_PORT=993
# 注意：需要开启SMTP/IMAP服务并获取授权码

# 163邮箱配置示例:
# SMTP_HOST="smtp.163.com"
# SMTP_PORT=25
# IMAP_HOST="imap.163.com"
# IMAP_PORT=993

# =============================================================================
# 安全提醒
# =============================================================================
# 1. 请务必更改默认的SECRET_KEY
# 2. 生产环境请设置DEBUG=false
# 3. 使用强密码保护邮箱账户
# 4. 定期更换邮箱密码和应用专用密码
# 5. 限制ALLOWED_HOSTS到实际需要的域名
# 6. 考虑使用环境变量管理敏感信息